/*
 * JSP generated by Resin-3.1.8 (built Mon, 17 Nov 2008 12:15:21 PST)
 */

package _jsp;
import javax.servlet.*;
import javax.servlet.jsp.*;
import javax.servlet.http.*;
import java.sql.*;
import java.io.*;
import java.text.DateFormat;
import java.util.*;
import java.util.Date;
import java.text.*;
import CP_Classes.vo.votblEvent;
import java.lang.String;

public class _eventviewer__jsp extends com.caucho.jsp.JavaPage
{
  private static final java.util.HashMap<String,java.lang.reflect.Method> _jsp_functionMap = new java.util.HashMap<String,java.lang.reflect.Method>();
  private boolean _caucho_isDead;
  
  public void
  _jspService(javax.servlet.http.HttpServletRequest request,
              javax.servlet.http.HttpServletResponse response)
    throws java.io.IOException, javax.servlet.ServletException
  {
    javax.servlet.http.HttpSession session = request.getSession(true);
    com.caucho.server.webapp.WebApp _jsp_application = _caucho_getApplication();
    javax.servlet.ServletContext application = _jsp_application;
    com.caucho.jsp.PageContextImpl pageContext = _jsp_application.getJspApplicationContext().allocatePageContext(this, _jsp_application, request, response, null, session, 8192, true, false);
    javax.servlet.jsp.PageContext _jsp_parentContext = pageContext;
    javax.servlet.jsp.JspWriter out = pageContext.getOut();
    final javax.el.ELContext _jsp_env = pageContext.getELContext();
    javax.servlet.ServletConfig config = getServletConfig();
    javax.servlet.Servlet page = this;
    response.setContentType("text/html");
    response.setCharacterEncoding("UTF-8");
    request.setCharacterEncoding("UTF-8");
    try {
      out.write(_jsp_string0, 0, _jsp_string0.length);
      // by lydia Date 05/09/2008 Fix jsp file to support Thai language 
      out.write(_jsp_string1, 0, _jsp_string1.length);
      CP_Classes.EventViewer EV;
      synchronized (pageContext.getSession()) {
        EV = (CP_Classes.EventViewer) pageContext.getSession().getAttribute("EV");
        if (EV == null) {
          EV = new CP_Classes.EventViewer();
          pageContext.getSession().setAttribute("EV", EV);
        }
      }
      out.write(_jsp_string2, 0, _jsp_string2.length);
      CP_Classes.Login logchk;
      synchronized (pageContext.getSession()) {
        logchk = (CP_Classes.Login) pageContext.getSession().getAttribute("logchk");
        if (logchk == null) {
          logchk = new CP_Classes.Login();
          pageContext.getSession().setAttribute("logchk", logchk);
        }
      }
      out.write(_jsp_string3, 0, _jsp_string3.length);
      CP_Classes.ExcelEventViewer ExcelEvent;
      synchronized (pageContext.getSession()) {
        ExcelEvent = (CP_Classes.ExcelEventViewer) pageContext.getSession().getAttribute("ExcelEvent");
        if (ExcelEvent == null) {
          ExcelEvent = new CP_Classes.ExcelEventViewer();
          pageContext.getSession().setAttribute("ExcelEvent", ExcelEvent);
        }
      }
      out.write(_jsp_string4, 0, _jsp_string4.length);
       	// added to check whether organisation is a consulting company
// Mark Oei 09 Mar 2010 
      out.write(_jsp_string2, 0, _jsp_string2.length);
      CP_Classes.Organization Org;
      synchronized (pageContext.getSession()) {
        Org = (CP_Classes.Organization) pageContext.getSession().getAttribute("Org");
        if (Org == null) {
          Org = new CP_Classes.Organization();
          pageContext.getSession().setAttribute("Org", Org);
        }
      }
      out.write(_jsp_string2, 0, _jsp_string2.length);
      CP_Classes.Create_Edit_Survey CE_Survey;
      synchronized (pageContext.getSession()) {
        CE_Survey = (CP_Classes.Create_Edit_Survey) pageContext.getSession().getAttribute("CE_Survey");
        if (CE_Survey == null) {
          CE_Survey = new CP_Classes.Create_Edit_Survey();
          pageContext.getSession().setAttribute("CE_Survey", CE_Survey);
        }
      }
      out.write(_jsp_string2, 0, _jsp_string2.length);
      CP_Classes.Setting setting;
      synchronized (pageContext.getSession()) {
        setting = (CP_Classes.Setting) pageContext.getSession().getAttribute("setting");
        if (setting == null) {
          setting = new CP_Classes.Setting();
          pageContext.getSession().setAttribute("setting", setting);
        }
      }
      out.write(_jsp_string5, 0, _jsp_string5.length);
      CP_Classes.Translate trans;
      synchronized (pageContext.getSession()) {
        trans = (CP_Classes.Translate) pageContext.getSession().getAttribute("trans");
        if (trans == null) {
          trans = new CP_Classes.Translate();
          pageContext.getSession().setAttribute("trans", trans);
        }
      }
      out.write(_jsp_string6, 0, _jsp_string6.length);
      out.print((trans.tslt("That date is invalid. Please try again")));
      out.write(_jsp_string7, 0, _jsp_string7.length);
      out.print((trans.tslt("That date is invalid. Please try again")));
      out.write(_jsp_string8, 0, _jsp_string8.length);
      out.print((trans.tslt("Both dates must be entered")));
      out.write(_jsp_string9, 0, _jsp_string9.length);
      out.print((trans.tslt("First date must be earlier than the second date")));
      out.write(_jsp_string10, 0, _jsp_string10.length);
      out.print((trans.tslt("Are you sure you want to delete the records")));
      out.write(_jsp_string11, 0, _jsp_string11.length);
      out.print(request.getParameter("org"));
      out.write(_jsp_string12, 0, _jsp_string12.length);
      out.print(request.getParameter("fromDate"));
      out.write(_jsp_string13, 0, _jsp_string13.length);
      out.print(request.getParameter("toDate"));
      out.write(_jsp_string14, 0, _jsp_string14.length);
      out.print((trans.tslt("No record selected")));
      out.write(_jsp_string15, 0, _jsp_string15.length);
      
	//response.setHeader("Pragma", "no-cache");
	//response.setHeader("Cache-Control", "no-cache");
	//response.setDateHeader("expires", 0);

String username=(String)session.getAttribute("username");

  if (!logchk.isUsable(username)) 
  {
      out.write(_jsp_string16, 0, _jsp_string16.length);
        } 
  else 
  { 	
  //Check if any records need to be deleted
if(request.getParameter("delete") != null) {
 	    String [] chkSelect = request.getParameterValues("eventID");
		
		if(chkSelect != null) {
			for(int i=0; i<chkSelect.length; i++) {
				if(chkSelect[i] != null) {
					System.out.println("CHK BOX: " + Integer.parseInt(chkSelect[i]));
					EV.deleteRecord(Integer.parseInt(chkSelect[i]));
				}
			}

      out.write(_jsp_string17, 0, _jsp_string17.length);
      out.print((trans.tslt("Record(s) Deleted")));
      out.write(_jsp_string18, 0, _jsp_string18.length);
      out.print(request.getParameter("org"));
      out.write(_jsp_string12, 0, _jsp_string12.length);
      out.print(request.getParameter("fromDate"));
      out.write(_jsp_string13, 0, _jsp_string13.length);
      out.print(request.getParameter("toDate"));
      out.write(_jsp_string19, 0, _jsp_string19.length);
      					
				
		}
	}


/************************************************** ADDING TOGGLE FOR SORTING PURPOSE *************************************************/

      out.write(_jsp_string20, 0, _jsp_string20.length);
      out.print((trans.tslt("As there are many records, this operation may take a while")));
      out.write(_jsp_string21, 0, _jsp_string21.length);
      
	String fromDate = "";
	String toDate = "";
	
	if (request.getParameter("fromDate")!=null) 
		fromDate = request.getParameter("fromDate");
	
	if (request.getParameter("toDate")!=null)
		toDate = request.getParameter("toDate");

	int toggle = EV.getToggle();	//0=asc, 1=desc
	int type = 7; //1=name, 2=origin		
			
	if(request.getParameter("name") != null)
	{	 
		if(toggle == 0)
			toggle = 1;
		else
			toggle = 0;
		
		EV.setToggle(toggle);
		
		type = Integer.parseInt(request.getParameter("name"));			 
		EV.setSortType(type);									
	} 
	
/************************************************** ADDING TOGGLE FOR SORTING PURPOSE *************************************************/

	String deletedDate = "";
	SimpleDateFormat day_view= new SimpleDateFormat ("dd/MM/yyyy");
	int userType = logchk.getUserType();	// 1= super admin
	int pkUser = logchk.getPKUser();
	
	//Modified the assignment of compName value by adding an IF condition, ensure that the company selected will not revert to default when the page reloads, Sebastian, 29 July 2010 
	String compName = "";
	
	//if user never select any organisation, reset the comp name and org name to the defaults, Sebastian, 05 July 2010
	if (request.getParameter("org") == null && request.getParameter("comp") == null && request.getParameter("name") == null) 
	{
		//Modified to check if user is sa and which consulting company is selected, To ensure that the events returned are from the consulting company selected, Sebastian, 05 July 2010
		if (userType == 1) // 1 = sa
		{
			compName = EV.getCompNameByCompID(logchk.getCompany());
		}
		else
		{
			compName = EV.companyName(pkUser);
		}
		//
		EV.setCompName(compName);
		EV.setOrgName("All");
	}		
	//
	
	compName = EV.getCompName();	
	String orgName = EV.getOrgName();	
	
	//ResultSet rsEvent = null;
	//ResultSet rsCompany = EV.getCompanies(orgName);
	//ResultSet rsOrg = null;
	Vector rsEvent = null;
	Vector rsCompany = EV.getCompanies(orgName);
	Vector rsOrg = null;
	
	if(request.getParameter("comp") != null) {
		compName = request.getParameter("comp").trim();

		rsOrg = EV.getOrganization(compName);
		EV.setCompName(compName);
		
		//Added code to set org name to all, To ensure that when comp name changes, all events from the organisations in the changed comp will be shown, Sebastian, 29 July 2010
		EV.setOrgName("All");
	}
	else
		rsOrg = EV.getOrganization(compName);
	/*
	* Change(s) : Added new variable UserDetailtmp and IF conditions using UserDetailtmp
	* Reason(s) : To get user's organisation and fix the issue of user who is not sa being able to view events in other organisation
	* Updated By: Sebastian
	* Updated On: 29 July 2010
	*/
	String [] UserDetailtmp = new String[16];
	UserDetailtmp = CE_Survey.getUserDetail(logchk.getPKUser());
		
	if(request.getParameter("org") != null) {
		orgName = request.getParameter("org").trim();
		EV.setOrgName(orgName);
	}
	else{
		//added an IF condition, Ensure that retrieving companies is only done when user is sa, Sebastian, 29 July 2010
		if (userType == 1)
		{
			rsCompany = EV.getCompanies(orgName);
		}
		else
		{
			//added an IF condition, fix the issue where events of other organisations can be seen if user is not sa, Sebastian, 29 July 2010
			if (!UserDetailtmp[10].equals(orgName))
			{
				EV.setOrgName(UserDetailtmp[10]);
			}
			//
		}//End IF condition
	}
	
	compName = EV.getCompName();
	orgName = EV.getOrgName();

	//Branched an IF condition to get event records based on the user type, If user is not SA or not a consulting company, the ALL selection of the org should only return events of the user organisation, Sebastian, 29 July 2010
	//Gwen Oh - 22/09/2011: Changed method call to getAllRecords() according to the changes made to the parameters in EventView.java
	if (logchk.getUserType() == 1 || (logchk.getUserType() == 2 && Org.isConsulting(UserDetailtmp[10]) == true))
	{
			rsEvent = EV.getAllRecords(compName, orgName, fromDate, toDate, logchk.getUserType());
	}else if (logchk.getUserType() == 2 && Org.isConsulting(UserDetailtmp[10]) == false)
	{	
			rsEvent = EV.getAllRecords(compName, UserDetailtmp[10], fromDate, toDate, logchk.getUserType());
	}
	//End IF condition
	
	String t = "All";

	if(request.getParameter("print") != null) {		
		
		Date timeStamp = new java.util.Date();
		
		SimpleDateFormat dFormat = new SimpleDateFormat("ddMMyyHHmmss");
		String temp  =  dFormat.format(timeStamp);
		
		String file_name = "EventViewer" + temp + ".xls";
	

		ExcelEvent.WriteToReport(compName, orgName, pkUser, logchk.getUserType(), file_name);	


	String output = setting.getReport_Path() + "\\"+file_name;
	
	File f = new File (output);

	response.reset();
	//set the content type(can be excel/word/powerpoint etc..)
	response.setContentType ("application/xls");
	//set the header and also the Name by which user will be prompted to save
	response.addHeader ("Content-Disposition", "attachment;filename=\"EventViewer.xls\"");

		
	//get the file name
	String name = f.getName().substring(f.getName().lastIndexOf("/") + 1,f.getName().length());
	//OPen an input stream to the file and post the file contents thru the 
	//servlet output stream to the client m/c
	
		InputStream in = new FileInputStream(f);
		ServletOutputStream outs = response.getOutputStream();
		
		
		int bit = 256;
		int i = 0;


    		try {
        			while ((bit) >= 0) {
        				bit = in.read();
        				outs.write(bit);
        			}
        			//System.out.println("" +bit);

            		} catch (IOException ioe) {
            			//System.out.print("TEST" + ioe.getMessage());

      out.write(_jsp_string22, 0, _jsp_string22.length);
      						
            		}
            		outs.flush();
            		outs.close();
            		in.close();	
}
	



	

      out.write(_jsp_string23, 0, _jsp_string23.length);
      	
	if(userType == 1) {

      out.write(_jsp_string24, 0, _jsp_string24.length);
      out.print(( trans.tslt("Company") ));
      out.write(_jsp_string25, 0, _jsp_string25.length);
      out.print((t));
      out.write(_jsp_string26, 0, _jsp_string26.length);
      
		
	/********************
	* Edited by James 29 Oct 2007
	************************/
	
			//while(rsCompany.next()) {
			for(int i=0; i<rsCompany.size(); i++) {
			votblEvent voCompany= (votblEvent)rsCompany.elementAt(i);
				String name = voCompany.getCompanyName();
			
				if(name.equals(compName)) { 
      out.write(_jsp_string27, 0, _jsp_string27.length);
      out.print((name));
      out.write(_jsp_string28, 0, _jsp_string28.length);
      out.print((name));
      out.write(_jsp_string29, 0, _jsp_string29.length);
       }else { 
      out.write(_jsp_string27, 0, _jsp_string27.length);
      out.print((name));
      out.write(_jsp_string30, 0, _jsp_string30.length);
      out.print((name));
      out.write(_jsp_string29, 0, _jsp_string29.length);
       } 	// End of if statements
			}			// End of for loop
		
      out.write(_jsp_string31, 0, _jsp_string31.length);
      	}	// End of if statement for userType = 1 
      out.write(_jsp_string32, 0, _jsp_string32.length);
      out.print(( trans.tslt("Organisation") ));
      out.write(_jsp_string33, 0, _jsp_string33.length);
      out.print((t));
      out.write(_jsp_string26, 0, _jsp_string26.length);
      
				
	/********************
	* Edited by James 29 Oct 2007
	************************/
    	// Added to check whether organisation is also a consulting company
    	// if yes, will display a dropdown list of organisation managed by this company
    	// else, it will display the current organisation only
    	// Mark Oei 
    	String [] UserDetail = new String[14];
    	UserDetail = CE_Survey.getUserDetail(logchk.getPKUser());
    	boolean isConsulting = true;
    	isConsulting = Org.isConsulting(UserDetail[10]); // check whether organisation is a consulting company 
    	if (isConsulting){
			//while(rsOrg.next()) {
			for(int i=0; i<rsOrg.size(); i++) {
			votblEvent voOrg = (votblEvent)rsOrg.elementAt(i);
				//int ID = rsOrg.getInt("PKOrganization");
				String name = voOrg.getOrganizationName();
				//System.out.println(name);
				
				if(name.equals(orgName)) {
		
      out.write(_jsp_string34, 0, _jsp_string34.length);
      out.print((name));
      out.write(_jsp_string28, 0, _jsp_string28.length);
      out.print((name));
      out.write(_jsp_string35, 0, _jsp_string35.length);
      
				}else {
		
      out.write(_jsp_string34, 0, _jsp_string34.length);
      out.print((name));
      out.write(_jsp_string30, 0, _jsp_string30.length);
      out.print((name));
      out.write(_jsp_string35, 0, _jsp_string35.length);
      
				}
			}			
    	} else { 
    	//Added an IF condition when displaying the dropdown list of organisation, Fix the issue where organisation selected does not remain selected after the page is submitted and returned, Sebastian, 29 July 2010
			if (orgName.equals(UserDetail[10]))
			{
				
      out.write(_jsp_string36, 0, _jsp_string36.length);
      out.print((UserDetail[10]));
      out.write(_jsp_string28, 0, _jsp_string28.length);
      out.print((UserDetail[10]));
      out.write(_jsp_string37, 0, _jsp_string37.length);
      
			}else {
				
      out.write(_jsp_string36, 0, _jsp_string36.length);
      out.print((UserDetail[10]));
      out.write(_jsp_string30, 0, _jsp_string30.length);
      out.print((UserDetail[10]));
      out.write(_jsp_string37, 0, _jsp_string37.length);
       
			}
		// End IF condition
		} // End of isConsulting 
      out.write(_jsp_string38, 0, _jsp_string38.length);
      out.print((fromDate));
      out.write(_jsp_string39, 0, _jsp_string39.length);
      out.print((toDate));
      out.write(_jsp_string40, 0, _jsp_string40.length);
      out.print((trans.tslt("Show")));
      out.write(_jsp_string41, 0, _jsp_string41.length);
      
	if(userType == 1) {

      out.write(_jsp_string42, 0, _jsp_string42.length);
      
	}else {

      out.write(_jsp_string43, 0, _jsp_string43.length);
      	}

      out.write(_jsp_string44, 0, _jsp_string44.length);
      
	if(userType == 1) {

      out.write(_jsp_string45, 0, _jsp_string45.length);
       } 
      out.write(_jsp_string46, 0, _jsp_string46.length);
      out.print(( trans.tslt("Action") ));
      out.write(_jsp_string47, 0, _jsp_string47.length);
      out.print(( trans.tslt("Item") ));
      out.write(_jsp_string48, 0, _jsp_string48.length);
      out.print(( trans.tslt("Description") ));
      out.write(_jsp_string49, 0, _jsp_string49.length);
      out.print(( trans.tslt("Login Name") ));
      out.write(_jsp_string50, 0, _jsp_string50.length);
      out.print(( trans.tslt("Action Date") ));
      out.write(_jsp_string51, 0, _jsp_string51.length);
      
	int displayNo = 0;
	/********************
	* Edited by James 29 Oct 2007
	************************/
	//while(rsEvent.next()) {	
	for(int i=0; i<rsEvent.size(); i++) {
	 votblEvent voEvent = (votblEvent)rsEvent.elementAt(i);
		displayNo++;
		int eventID = voEvent.getEventID();	

      out.write(_jsp_string52, 0, _jsp_string52.length);
      
	if(userType == 1) {

      out.write(_jsp_string53, 0, _jsp_string53.length);
      out.print((eventID));
      out.write(_jsp_string54, 0, _jsp_string54.length);
       } 
      out.write(_jsp_string55, 0, _jsp_string55.length);
      out.print((displayNo));
      out.write(_jsp_string56, 0, _jsp_string56.length);
      out.print((voEvent.getEventAction()));
      out.write(_jsp_string57, 0, _jsp_string57.length);
      out.print((voEvent.getItem()));
      out.write(_jsp_string56, 0, _jsp_string56.length);
      out.print((voEvent.getDescription()));
      out.write(_jsp_string58, 0, _jsp_string58.length);
      out.print((voEvent.getLoginName()));
      out.write(_jsp_string59, 0, _jsp_string59.length);
      out.print((day_view.format(voEvent.getDeletedDate())));
      out.write(_jsp_string60, 0, _jsp_string60.length);
       } 
      out.write(_jsp_string61, 0, _jsp_string61.length);
      
	if(userType == 1) {

      out.write(_jsp_string62, 0, _jsp_string62.length);
      out.print(( trans.tslt("Delete") ));
      out.write(_jsp_string63, 0, _jsp_string63.length);
       } 
      out.write(_jsp_string64, 0, _jsp_string64.length);
      out.print(( trans.tslt("DOWNLOAD") ));
      out.write(_jsp_string65, 0, _jsp_string65.length);
       } 
      out.write(_jsp_string66, 0, _jsp_string66.length);
      // by lydia Date 05/09/2008 Fix jsp file to support Thai language 
      out.write(_jsp_string67, 0, _jsp_string67.length);
      
	Calendar c = Calendar.getInstance();
	int year = c.get(Calendar.YEAR);

      out.write(_jsp_string68, 0, _jsp_string68.length);
       // Denise 05/01/2010 update new email address 
      out.write(_jsp_string69, 0, _jsp_string69.length);
      out.print((year));
      out.write(_jsp_string70, 0, _jsp_string70.length);
    } catch (java.lang.Throwable _jsp_e) {
      pageContext.handlePageException(_jsp_e);
    } finally {
      _jsp_application.getJspApplicationContext().freePageContext(pageContext);
    }
  }

  private java.util.ArrayList _caucho_depends = new java.util.ArrayList();

  public java.util.ArrayList _caucho_getDependList()
  {
    return _caucho_depends;
  }

  public void _caucho_addDepend(com.caucho.vfs.PersistentDependency depend)
  {
    super._caucho_addDepend(depend);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
  }

  public boolean _caucho_isModified()
  {
    if (_caucho_isDead)
      return true;
    if (com.caucho.server.util.CauchoSystem.getVersionId() != 1886798272571451039L)
      return true;
    for (int i = _caucho_depends.size() - 1; i >= 0; i--) {
      com.caucho.vfs.Dependency depend;
      depend = (com.caucho.vfs.Dependency) _caucho_depends.get(i);
      if (depend.isModified())
        return true;
    }
    return false;
  }

  public long _caucho_lastModified()
  {
    return 0;
  }

  public java.util.HashMap<String,java.lang.reflect.Method> _caucho_getFunctionMap()
  {
    return _jsp_functionMap;
  }

  public void init(ServletConfig config)
    throws ServletException
  {
    com.caucho.server.webapp.WebApp webApp
      = (com.caucho.server.webapp.WebApp) config.getServletContext();
    super.init(config);
    com.caucho.jsp.TaglibManager manager = webApp.getJspApplicationContext().getTaglibManager();
    com.caucho.jsp.PageContextImpl pageContext = new com.caucho.jsp.PageContextImpl(webApp, this);
  }

  public void destroy()
  {
      _caucho_isDead = true;
      super.destroy();
  }

  public void init(com.caucho.vfs.Path appDir)
    throws javax.servlet.ServletException
  {
    com.caucho.vfs.Path resinHome = com.caucho.server.util.CauchoSystem.getResinHome();
    com.caucho.vfs.MergePath mergePath = new com.caucho.vfs.MergePath();
    mergePath.addMergePath(appDir);
    mergePath.addMergePath(resinHome);
    com.caucho.loader.DynamicClassLoader loader;
    loader = (com.caucho.loader.DynamicClassLoader) getClass().getClassLoader();
    String resourcePath = loader.getResourcePathSpecificFirst();
    mergePath.addClassPath(resourcePath);
    com.caucho.vfs.Depend depend;
    depend = new com.caucho.vfs.Depend(appDir.lookup("EventViewer.jsp"), -6788344943748639846L, false);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
    depend = new com.caucho.vfs.Depend(appDir.lookup("Footer.jsp"), -6500873733011061252L, false);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
  }

  private final static char []_jsp_string56;
  private final static char []_jsp_string32;
  private final static char []_jsp_string40;
  private final static char []_jsp_string19;
  private final static char []_jsp_string43;
  private final static char []_jsp_string25;
  private final static char []_jsp_string42;
  private final static char []_jsp_string52;
  private final static char []_jsp_string6;
  private final static char []_jsp_string65;
  private final static char []_jsp_string36;
  private final static char []_jsp_string9;
  private final static char []_jsp_string46;
  private final static char []_jsp_string30;
  private final static char []_jsp_string64;
  private final static char []_jsp_string55;
  private final static char []_jsp_string54;
  private final static char []_jsp_string20;
  private final static char []_jsp_string28;
  private final static char []_jsp_string60;
  private final static char []_jsp_string48;
  private final static char []_jsp_string62;
  private final static char []_jsp_string59;
  private final static char []_jsp_string35;
  private final static char []_jsp_string23;
  private final static char []_jsp_string45;
  private final static char []_jsp_string14;
  private final static char []_jsp_string8;
  private final static char []_jsp_string58;
  private final static char []_jsp_string0;
  private final static char []_jsp_string61;
  private final static char []_jsp_string18;
  private final static char []_jsp_string69;
  private final static char []_jsp_string11;
  private final static char []_jsp_string24;
  private final static char []_jsp_string34;
  private final static char []_jsp_string44;
  private final static char []_jsp_string10;
  private final static char []_jsp_string57;
  private final static char []_jsp_string22;
  private final static char []_jsp_string68;
  private final static char []_jsp_string17;
  private final static char []_jsp_string27;
  private final static char []_jsp_string29;
  private final static char []_jsp_string15;
  private final static char []_jsp_string31;
  private final static char []_jsp_string12;
  private final static char []_jsp_string26;
  private final static char []_jsp_string38;
  private final static char []_jsp_string41;
  private final static char []_jsp_string47;
  private final static char []_jsp_string1;
  private final static char []_jsp_string21;
  private final static char []_jsp_string50;
  private final static char []_jsp_string37;
  private final static char []_jsp_string4;
  private final static char []_jsp_string2;
  private final static char []_jsp_string53;
  private final static char []_jsp_string33;
  private final static char []_jsp_string63;
  private final static char []_jsp_string66;
  private final static char []_jsp_string39;
  private final static char []_jsp_string13;
  private final static char []_jsp_string51;
  private final static char []_jsp_string5;
  private final static char []_jsp_string3;
  private final static char []_jsp_string16;
  private final static char []_jsp_string49;
  private final static char []_jsp_string70;
  private final static char []_jsp_string7;
  private final static char []_jsp_string67;
  static {
    _jsp_string56 = "</td>\r\n    <td bordercolor=\"#3399FF\">".toCharArray();
    _jsp_string32 = " \r\n  <tr>   \r\n    <td align=\"left\" width=\"93\">".toCharArray();
    _jsp_string40 = "' />\r\n  	<img border=\"0\" style=\"cursor:pointer\" src=\"images/CAL-icon.gif\" width=\"16\" height=\"16\" onClick=\"c2.popup('toDateTxt')\" />\r\n  	</td>\r\n  	<td align=\"left\"><input type=\"button\" value=\"".toCharArray();
    _jsp_string19 = "\";\r\n			\r\n		</script>\r\n".toCharArray();
    _jsp_string43 = "\r\n<div style='width:610px; height:278px; z-index:1; overflow:auto'>  \r\n".toCharArray();
    _jsp_string25 = ":</td>\r\n    <td width=\"13\">&nbsp;</td>\r\n    <td width=\"429\">\r\n		<select name=\"Company\" onChange=\"compChange(this.form, this.form.Company)\">\r\n		<option value=".toCharArray();
    _jsp_string42 = "\r\n<div style='width:610px; height:230px; z-index:1; overflow:auto;'>  \r\n".toCharArray();
    _jsp_string52 = "\r\n<tr>\r\n".toCharArray();
    _jsp_string6 = "\r\n\r\n<body>\r\n<script language=\"javascript\" src=\"script/codethatcalendarstd.js\"></script>\r\n<script language=\"javascript\" src=\"script/dt_ex.js\"></script>\r\n<script language=\"javascript\">\r\n\r\n//Gwen Oh - 22/09/2011: Added trim function\r\nfunction trim(str)\r\n{\r\n    return str.replace(/^\\s*/, \"\").replace(/\\s*$/, \"\");\r\n}\r\n\r\n// Gwen Oh - 20/09/2011: Added javascript functions to validate date\r\nvar c1 = new CodeThatCalendar(caldef2);\r\nvar c2 = new CodeThatCalendar(caldef3);\r\n\r\nfunction validateDates()\r\n{\r\n	var checkingFlag = true;\r\n	x = document.AdvanceSettings\r\n	if(checkdate(x.fromDateTxt,x.toDateTxt) == false)\r\n	{\r\n		checkingFlag = false;\r\n	}\r\n	\r\n	return checkingFlag;\r\n}\r\n\r\nfunction checkdate(fromDate, toDate) {\r\n	\r\n	if (fromDate != \"\") {\r\n		if (isDate(fromDate) == false) {\r\n			alert(\"".toCharArray();
    _jsp_string65 = "\">\r\n</form>\r\n\r\n".toCharArray();
    _jsp_string36 = "\r\n				<option value=\"".toCharArray();
    _jsp_string9 = ".\");\r\n		//else \r\n		alert(\"".toCharArray();
    _jsp_string46 = "\r\n<th bgcolor=\"navy\" bordercolor=\"#3399FF\"><b>\r\n<font style='font-family:Arial;color:white'>No</font></b></th>\r\n<th bgcolor=\"navy\" bordercolor=\"#3399FF\"><a href=\"EventViewer.jsp?name=1\"><b>\r\n<font style='font-family:Arial;color:white'><u>".toCharArray();
    _jsp_string30 = "\">".toCharArray();
    _jsp_string64 = "\r\n<input type=\"submit\" name=\"print\" value=\"".toCharArray();
    _jsp_string55 = "	\r\n	<td align=\"center\" bordercolor=\"#3399FF\"><font size=\"2\">".toCharArray();
    _jsp_string54 = "\"></td>\r\n".toCharArray();
    _jsp_string20 = "\r\n<script>\r\n	alert(\"".toCharArray();
    _jsp_string28 = "\" selected>".toCharArray();
    _jsp_string60 = "</td> 	\r\n</tr>\r\n\r\n".toCharArray();
    _jsp_string48 = "</u></font></b></a></th>\r\n<th bgcolor=\"navy\" bordercolor=\"#3399FF\"><a href=\"EventViewer.jsp?name=3\"><b>\r\n<font style='font-family:Arial;color:white'><u>".toCharArray();
    _jsp_string62 = "\r\n\r\n<input type=\"button\" name=\"Delete\" value=\"".toCharArray();
    _jsp_string59 = "</td>\r\n	<td align=\"center\" bordercolor=\"#3399FF\">".toCharArray();
    _jsp_string35 = "\r\n        ".toCharArray();
    _jsp_string23 = "	\r\n	\r\n\r\n<form name=\"form1\" method=\"post\" action=\"\">\r\n<table width=\"833\" border=\"0\" font style='font-size:10.0pt;font-family:Arial'>\r\n".toCharArray();
    _jsp_string45 = "\r\n<th bordercolor=\"#3399FF\" bgcolor=\"navy\"><input type=\"checkbox\" name=\"checkAll\" value=\"checkbox\" onClick=\"checkedAll(this.form, this.form.eventID, this.form.checkAll)\"></th>\r\n".toCharArray();
    _jsp_string14 = "\";\r\n			form.method=\"post\";\r\n			form.submit();\r\n			return true;\r\n		}else\r\n			return false;		\r\n	}\r\n	else\r\n	{\r\n		alert(\"".toCharArray();
    _jsp_string8 = ".\");\r\n			return false;\r\n		}\r\n	}\r\n	\r\n	if (fromDate != \"\" && toDate !=\"\") {\r\n		var correct;   \r\n		if(doDateCheck(fromDate,toDate))\r\n		{\r\n			correct = true;\r\n		} else {\r\n		   	correct = false;\r\n		}\r\n		return correct;\r\n	}\r\n	else {\r\n		return true;\r\n	}\r\n}\r\n\r\nfunction isDate(fld) {\r\n    var RegExPattern = /^((((0?[1-9]|[12]\\d|3[01])[\\.\\-\\/](0?[13578]|1[02])[\\.\\-\\/]((1[6-9]|[2-9]\\d)?\\d{2}))|((0?[1-9]|[12]\\d|30)[\\.\\-\\/](0?[13456789]|1[012])[\\.\\-\\/]((1[6-9]|[2-9]\\d)?\\d{2}))|((0?[1-9]|1\\d|2[0-8])[\\.\\-\\/]0?2[\\.\\-\\/]((1[6-9]|[2-9]\\d)?\\d{2}))|(29[\\.\\-\\/]0?2[\\.\\-\\/]((1[6-9]|[2-9]\\d)?(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00)|00)))|(((0[1-9]|[12]\\d|3[01])(0[13578]|1[02])((1[6-9]|[2-9]\\d)?\\d{2}))|((0[1-9]|[12]\\d|30)(0[13456789]|1[012])((1[6-9]|[2-9]\\d)?\\d{2}))|((0[1-9]|1\\d|2[0-8])02((1[6-9]|[2-9]\\d)?\\d{2}))|(2902((1[6-9]|[2-9]\\d)?(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00)|00))))$/;\r\n    var errorMessage = 'Please enter valid date as month, day, and four digit year.\\nYou may use a slash, hyphen or period to separate the values.\\nThe date must be a real date. 30/2/2000 would not be accepted.\\nFormay dd/mm/yyyy.';\r\n    if ((fld.match(RegExPattern)) && (fld!='')) {\r\n       return true;\r\n    } else {\r\n		return false;\r\n    } \r\n}\r\n\r\nfunction doDateCheck(opendate, closedate) {\r\n	var tmpopendate = opendate.substring(3,5) +\"/\" + opendate.substring(0,2) + \"/\" + opendate.substring(6,10);\r\n	var tmpclosedate = closedate.substring(3,5) +\"/\" + closedate.substring(0,2) + \"/\" + closedate.substring(6,10);\r\n	\r\n	if (Date.parse(tmpopendate) <= Date.parse(tmpclosedate)) {\r\n		return true;\r\n	}\r\n	else {\r\n		//if (opendate == \"\" || closedate == \"\") \r\n		//alert(\"".toCharArray();
    _jsp_string58 = "</td>\r\n    <td align=\"center\" bordercolor=\"#3399FF\">".toCharArray();
    _jsp_string0 = "  \r\n				 \r\n<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">\r\n<html>\r\n<head>\r\n<title>Event Viewer</title>\r\n\r\n<meta http-equiv=\"Content-Type\" content=\"text/html\">\r\n\r\n".toCharArray();
    _jsp_string61 = "\r\n</table>\r\n</div>\r\n\r\n\r\n<p></p>\r\n".toCharArray();
    _jsp_string18 = "\");\r\n			\r\n			//modified href to include query string org of the selected org, to ensure that after the event(s) are deleted, the page refreshes and shows the events of the organisation selected, Sebastian, 29 July 2010\r\n			//Gwen Oh - 26/09/2011: Modified link to include dates\r\n			window.location.href = \"EventViewer.jsp?org=".toCharArray();
    _jsp_string69 = "\r\n		<td align=\"center\" height=\"5\" valign=\"top\"><font size=\"1\" color=\"navy\" face=\"Arial\">&nbsp;&nbsp;<a style=\"TEXT-DECORATION: none; color:navy;\" href=\"Login.jsp\">Home</a>&nbsp;| <a color=\"navy\" face=\"Arial\">&nbsp;<a style=\"TEXT-DECORATION: none; color:navy;\" href=\"mailto:3SixtyAdmin@pcc.com.sg?subject=Regarding:\">Contact \r\n		Us</a><a color=\"navy\" face=\"Arial\" href=\"termofuse.jsp\" target=\"_blank\"><span style=\"color: #000080; text-decoration: none\"> | Terms of Use </span></a>| <span style=\"color: #000080; text-decoration: none\"><a style=\"TEXT-DECORATION: none; color:navy;\" href=\"http://www.pcc.com.sg/\" target=\"_blank\">PCC Website</a></span></font></td></tr><tr>\r\n		<font size=\"2\" face=\"Arial\" style=\"font-size: 14pt\" color=\"#000080\">\r\n   \r\n		<td align=\"center\" height=\"5\" valign=\"top\">\r\n		<font size=\"1\" color=\"navy\" face=\"Arial\">&nbsp;Copyright &copy; ".toCharArray();
    _jsp_string11 = " ?\"))\r\n		{\r\n			//modified link for deleting event to include query string org of the selected org, to ensure that after the event(s) are deleted, the page refreshes and shows the events of the organisation selected, Sebastian, 29 July 2010\r\n			//Gwen Oh - 26/09/2011: Modified link to include dates\r\n			form.action=\"EventViewer.jsp?delete=1&org=".toCharArray();
    _jsp_string24 = "\r\n  <tr>\r\n    <td width=\"93\" align=\"left\">".toCharArray();
    _jsp_string34 = "\r\n        <option value = \"".toCharArray();
    _jsp_string44 = "\r\n<table border=\"1\" bgcolor=\"#FFFFCC\" style='border-color:#3399FF; font-size:10.0pt;font-family:Arial' width=\"593\">\r\n".toCharArray();
    _jsp_string10 = ".\");\r\n		return false;\r\n   }\r\n}\r\n\r\n\r\nfunction check(field)\r\n{\r\n	var isValid = 0;\r\n\r\n	//check whether any checkbox selected\r\n	\r\n	for (i = 0; i < field.length; i++) \r\n		if(field[i].checked)\r\n			isValid = 1;\r\n		\r\n	if(isValid == 0 && field != null)  \r\n		if(field.checked) {\r\n			clickedValue = field.value;\r\n			isValid = 1;\r\n		}\r\n	\r\n	if (isValid == 1)\r\n		return true;\r\n	else\r\n		return false;\r\n}\r\n \r\nfunction checkedAll(form, field, checkAll)\r\n{	\r\n	if(checkAll.checked == true) \r\n		for(var i=0; i<field.length; i++)\r\n			field[i].checked = true;\r\n	else \r\n		for(var i=0; i<field.length; i++)\r\n			field[i].checked = false;	\r\n}\r\n \r\nfunction confirmDelete(form, field)\r\n{\r\n	if(check(field))\r\n	{\r\n		if(confirm(\"".toCharArray();
    _jsp_string57 = "</td>\r\n	<td bordercolor=\"#3399FF\">".toCharArray();
    _jsp_string22 = "\r\n<script>\r\n	form.action = \"EventViewer.jsp?print=1\";\r\n	form.submit();\r\n</script>\r\n".toCharArray();
    _jsp_string68 = "\r\n\r\n<table border=\"0\" width=\"610\" height=\"26\" id=\"table1\">\r\n\r\n	<tr>\r\n		<font size=\"2\" face=\"Arial\" style=\"font-size: 14pt\" color=\"#000080\">\r\n		".toCharArray();
    _jsp_string17 = "\r\n		<script>\r\n			alert(\"".toCharArray();
    _jsp_string27 = "\r\n					<option value = \"".toCharArray();
    _jsp_string29 = "\r\n				".toCharArray();
    _jsp_string15 = "\");\r\n		return false;\r\n	}\r\n\r\n} \r\n\r\n//Edited by Xuehai 02 Jun 2011. Remove 'void'. Enable to run on different browers like Chrome&Firefox.\r\n//void function compChange(form, field)\r\nfunction compChange(form, field)\r\n{\r\n	form.action=\"EventViewer.jsp?comp=\" + field.value;\r\n	form.method=\"post\";\r\n	form.submit();\r\n} \r\n\r\n//void function orgChange(form, field)\r\nfunction orgChange(form, field)\r\n{	\r\n	//Gwen Oh - 22/09/2011: This function will now have to validate dates as well. So it will be the same as the show function.\r\n	show (form, field);\r\n	//form.action=\"EventViewer.jsp?org=\" + field.value;\r\n	//form.method=\"post\";\r\n	//form.submit();\r\n} \r\n\r\n//Gwen Oh - 20/09/2011: Added show function\r\nfunction show (form,field)\r\n{\r\n	var fromDate = trim(document.getElementById('fromDateTxt').value);\r\n	var toDate = trim(document.getElementById('toDateTxt').value);\r\n	var toSubmit = true;\r\n	\r\n	//No dates defined\r\n	if (fromDate == \"\" && toDate == \"\")\r\n		form.action=\"EventViewer.jsp?fromDate=\" + fromDate + \"&toDate=\" + toDate +\"&org=\" + field.value;\r\n	else {\r\n		//Check that dates are valid\r\n		if(checkdate(fromDate, toDate))\r\n			form.action=\"EventViewer.jsp?fromDate=\" + fromDate + \"&toDate=\" + toDate +\"&org=\" + field.value;\r\n		else\r\n			toSubmit = false;\r\n	}\r\n	\r\n	if (toSubmit) {\r\n		form.method=\"post\";\r\n		form.submit();\r\n	}\r\n}\r\n</script>\r\n".toCharArray();
    _jsp_string31 = "\r\n		</select>\r\n	</td>\r\n    <td width=\"280\">&nbsp;</td>\r\n  </tr>\r\n  <tr>\r\n    <td>&nbsp;</td>\r\n    <td>&nbsp;</td>\r\n    <td>&nbsp;</td>\r\n    <td align=\"center\">&nbsp;</td>\r\n  </tr>\r\n  ".toCharArray();
    _jsp_string12 = "&fromDate=".toCharArray();
    _jsp_string26 = ">All\r\n        ".toCharArray();
    _jsp_string38 = "\r\n		</select>\r\n	</td>    \r\n    <td>&nbsp;</td>\r\n  </tr>\r\n  <tr>\r\n    <td>&nbsp;</td>\r\n    <td>&nbsp;</td>\r\n    <td>&nbsp;</td>\r\n    <td align=\"center\">&nbsp;</td>\r\n  </tr>\r\n  <!--\r\n  Gwen Oh - 20/09/2011: Added option to filter by date range and added a show button\r\n  -->\r\n  <tr>\r\n  	<td align=\"left\" width=\"93\">Date Range:</td>\r\n  	<td width=\"13\">&nbsp;</td>\r\n  	<td width=\"429\">\r\n  	<input type=\"text\" size=\"12\" id=\"fromDateTxt\" value='".toCharArray();
    _jsp_string41 = "\" name=\"btnShow\" onClick=\"show(this.form, this.form.Organization)\"></td>\r\n  </tr>\r\n</table>\r\n\r\n<p></p>\r\n".toCharArray();
    _jsp_string47 = "</u></font></b></a></th>\r\n<th bgcolor=\"navy\" bordercolor=\"#3399FF\"><a href=\"EventViewer.jsp?name=2\"><b><font style='font-family:Arial;color:white'><u>".toCharArray();
    _jsp_string1 = "\r\n</head>\r\n\r\n".toCharArray();
    _jsp_string21 = "\");\r\n</script>\r\n".toCharArray();
    _jsp_string50 = "</u></font></b></a></th>\r\n<th bgcolor=\"navy\" bordercolor=\"#3399FF\"><a href=\"EventViewer.jsp?name=7\"><b>\r\n<font style='font-family:Arial;color:white'><u>".toCharArray();
    _jsp_string37 = "</option>".toCharArray();
    _jsp_string4 = "  \r\n".toCharArray();
    _jsp_string2 = "\r\n".toCharArray();
    _jsp_string53 = "\r\n    <td bordercolor=\"#3399FF\" align=\"center\"><input name=\"eventID\" type=\"checkbox\" value=\"".toCharArray();
    _jsp_string33 = ":</td>\r\n	<td width=\"13\">&nbsp;</td>\r\n    <td width=\"429\">\r\n		<select name=\"Organization\" onChange=\"orgChange(this.form, this.form.Organization)\">\r\n		<option value=".toCharArray();
    _jsp_string63 = "\" onClick=\"confirmDelete(this.form, this.form.eventID)\">\r\n".toCharArray();
    _jsp_string66 = "\r\n\r\n<p></p>\r\n\r\n\r\n".toCharArray();
    _jsp_string39 = "' />\r\n  	<img border=\"0\" style=\"cursor:pointer\" src=\"images/CAL-icon.gif\" width=\"16\" height=\"16\" onClick=\"c1.popup('fromDateTxt')\" />\r\n  	&nbsp;to&nbsp;\r\n  	<input type=\"text\" size=\"12\" id=\"toDateTxt\" value='".toCharArray();
    _jsp_string13 = "&toDate=".toCharArray();
    _jsp_string51 = "</u></font></b></a></th>\r\n\r\n".toCharArray();
    _jsp_string5 = "   \r\n".toCharArray();
    _jsp_string3 = "     \r\n".toCharArray();
    _jsp_string16 = " <font size=\"2\">\r\n   \r\n    	    	<script>\r\n	parent.location.href = \"index.jsp\";\r\n</script>\r\n".toCharArray();
    _jsp_string49 = "</u></font></b></a></th>\r\n<th bgcolor=\"navy\" bordercolor=\"#3399FF\"><a href=\"EventViewer.jsp?name=4\"><b>\r\n<font style='font-family:Arial;color:white'><u>".toCharArray();
    _jsp_string70 = " Pacific Century Consulting Pte Ltd. All Rights Reserved.\r\n		</font>\r\n		</td>\r\n		\r\n	</tr>\r\n		\r\n</table>\r\n\r\n\r\n</body>\r\n</html>\r\n".toCharArray();
    _jsp_string7 = ".\");\r\n			return false;\r\n		}\r\n   	}\r\n   	\r\n   	if (toDate != \"\") {\r\n		if (isDate(toDate) == false) {\r\n			alert(\"".toCharArray();
    _jsp_string67 = "\r\n\r\n".toCharArray();
  }
}
